[gd_scene load_steps=14 format=3 uid="uid://bysbeksbr5xev"]

[ext_resource type="Script" path="res://actors/skele/skele.gd" id="1_0f6wd"]
[ext_resource type="PackedScene" uid="uid://23diikqy7ade" path="res://actors/character_base/character_base.tscn" id="2_pv1av"]
[ext_resource type="AnimationLibrary" uid="uid://baxx1u8lp2y2q" path="res://blend/humanoid_lib/humanoid.blend" id="3_6kseu"]
[ext_resource type="PackedScene" uid="uid://btimrbt2m63il" path="res://blend/skele/skele.blend" id="9_nnkms"]
[ext_resource type="Script" path="res://nodes/motion_interpolator_3d.gd" id="10_1fgty"]
[ext_resource type="Script" path="res://nodes/state_machine/state_machine.gd" id="11_cooj2"]
[ext_resource type="Script" path="res://actors/skele/state_idle.gd" id="12_0ydk3"]
[ext_resource type="Script" path="res://actors/skele/state_chasing.gd" id="13_32k20"]
[ext_resource type="Script" path="res://actors/skele/state_attacking.gd" id="14_5jvry"]
[ext_resource type="PackedScene" uid="uid://b2mqxco6io0sq" path="res://components/visibility_area/visibility_area.tscn" id="15_4cpkf"]
[ext_resource type="Script" path="res://actors/skele/state_searching.gd" id="15_doy4h"]

[sub_resource type="Animation" id="Animation_8jmwy"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../CharacterBase/AttackHitbox:monitoring")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2dgtk"]
_data = {
"RESET": SubResource("Animation_8jmwy")
}

[node name="Skele" type="Node3D"]
script = ExtResource("1_0f6wd")

[node name="CharacterBase" parent="." instance=ExtResource("2_pv1av")]
collision_layer = 8
base_move_speed_multiplier = 1.5
acceleration = 25.0

[node name="AnimationTree" parent="CharacterBase" index="0"]
root_node = NodePath("%AnimationTree/../../Skele")
root_motion_track = NodePath("%GeneralSkeleton:Root")
libraries = {
"": SubResource("AnimationLibrary_2dgtk"),
"humanoid": ExtResource("3_6kseu")
}
anim_player = NodePath("../../Skele/AnimationPlayer")

[node name="AttackHitbox" parent="CharacterBase" index="3"]
collision_layer = 16
collision_mask = 2

[node name="MotionInterpolator3D" type="Node3D" parent="."]
process_priority = 1
script = ExtResource("10_1fgty")
target_path = NodePath("../CharacterBase")
motion_mode = 1
smoothing_position = 0.0
smoothing_rotation = 0.0
process_func = 1

[node name="Skele" parent="." instance=ExtResource("9_nnkms")]

[node name="GeneralSkeleton" parent="Skele/Armature" index="0"]
bones/1/position = Vector3(0.00225623, 0.811098, 9.86231e-11)
bones/1/rotation = Quaternion(0.0057267, -6.73036e-18, 3.80693e-17, 0.999984)
bones/2/rotation = Quaternion(0.271176, 0.663768, -0.0625476, 0.694236)
bones/3/rotation = Quaternion(0.139701, -0.690893, 0.206653, 0.678561)
bones/4/rotation = Quaternion(-3.1665e-08, 0.707107, -3.1665e-08, 0.707107)
bones/5/rotation = Quaternion(0.3174, -1.08929e-17, 7.00223e-17, 0.948292)
bones/6/rotation = Quaternion(0.275286, -0.662025, 0.059458, 0.694554)
bones/7/rotation = Quaternion(0.139561, 0.690933, -0.206446, 0.678613)
bones/9/rotation = Quaternion(-0.011427, 0.649015, 0.751901, -0.115298)
bones/10/rotation = Quaternion(0.272927, 0.596941, -0.754422, -0.0044936)
bones/11/rotation = Quaternion(-0.00979757, 0.213429, 0.976759, 0.0171289)
bones/12/rotation = Quaternion(-0.0308382, 0.995883, -0.0852426, 0.000507641)
bones/13/position = Vector3(0.325908, 1.38928, 0.163323)
bones/13/rotation = Quaternion(0.325726, -0.120492, 0.631912, 0.692872)
bones/14/position = Vector3(-0.0128508, 0.324014, 0.777033)
bones/15/position = Vector3(0.0707277, 0.287954, 0.160326)
bones/15/rotation = Quaternion(0.471713, -7.45058e-09, 5.96047e-08, 0.881752)
bones/16/position = Vector3(-4.48375e-06, -1.64522e-05, 2.92753e-05)
bones/16/rotation = Quaternion(-3.68785e-08, 0.707107, 0.707107, -3.68785e-08)
bones/17/position = Vector3(0.191738, 1.18916, -0.470641)
bones/17/rotation = Quaternion(-8.9407e-08, 9.31323e-10, 0, 1)
bones/18/position = Vector3(-0.325908, 1.38795, 0.16632)
bones/18/rotation = Quaternion(0.33986, 0.133419, -0.62931, 0.686049)
bones/19/rotation = Quaternion(-9.45931e-09, -0.707107, 0, 0.707107)
bones/19/scale = Vector3(1, 1, 1)
bones/20/position = Vector3(-0.0837318, 0.324014, 0.515325)
bones/21/position = Vector3(-0.0717268, 0.0011986, 0.153835)
bones/21/rotation = Quaternion(0.313176, 6.14673e-08, 1.49012e-08, 0.949695)
bones/22/position = Vector3(4.5267e-09, -1.28121e-09, 7.71257e-09)
bones/22/rotation = Quaternion(3.68785e-08, 0.707107, 0.707107, 3.68785e-08)
bones/23/position = Vector3(-0.191738, 1.18916, -0.470641)
bones/23/rotation = Quaternion(-8.9407e-08, -9.31323e-10, 0, 1)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Skele"]
root_motion_track = NodePath("%GeneralSkeleton:Root")
libraries = {
"": SubResource("AnimationLibrary_2dgtk"),
"humanoid": ExtResource("3_6kseu")
}

[node name="MotionInterpolator3D" type="Node3D" parent="Skele"]
process_priority = 1
script = ExtResource("10_1fgty")
target_path = NodePath("../../CharacterBase")

[node name="StateMachine" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("11_cooj2")
character_path = NodePath("../CharacterBase")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("12_0ydk3")

[node name="Chasing" type="Node" parent="StateMachine"]
script = ExtResource("13_32k20")

[node name="Attacking" type="Node" parent="StateMachine"]
script = ExtResource("14_5jvry")

[node name="Searching" type="Node" parent="StateMachine"]
script = ExtResource("15_doy4h")

[node name="VisibilityArea" parent="." instance=ExtResource("15_4cpkf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
target_desired_distance = 2.0
path_height_offset = 0.5
debug_enabled = true
debug_use_custom = true
debug_path_custom_color = Color(1, 0, 1, 1)

[editable path="CharacterBase"]
[editable path="Skele"]
